<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>pop out test</title>
</head>
<body>

<script>
    (function(i, s, o, g, r, a, m) {
        i.GoogleAnalyticsObject = r;
        i[r] = i[r] || function(){ (i[r].q = i[r].q || []).push(arguments); }, i[r].l = 1 * new Date();
        a = s.createElement(o), m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    var clientId;
    window.ga('create', 'UA-57790205-7', 'auto');
    window.ga(function(tracker)

        { clientId = tracker.get('clientId'); }
    );
    window.addEventListener('message', function(event) {
        if (event.origin.indexOf('bizzabo.com') < 0)
        { return; }

        if (event.data && (event.data = 'ticketWidgetReady')) {
            console.log('@@@ event', 'ticketWidgetReady');
            var frameWindows = document.getElementsByClassName('bizzabo-tickets-widget');
            for (var i = 0; i < frameWindows.length; i++) {
                console.log('@@@ i:', i);
                var iframeSelector = frameWindows[i].querySelector('iframe');
                var data = {
                    type: 'clientId', val: clientId
                };
                var iframe = iframeSelector && iframeSelector.contentWindow;
                console.log('@@@ iframe', !!iframe, data);
                if(iframe) {
                    iframe.postMessage(data, 'https://accounts.bizzabo.com');
                }
                else {
                    console.error('Analytics: Could not find ticket widget IFRAME');
                }
            }
        }
    });
</script>


</body>
</html>